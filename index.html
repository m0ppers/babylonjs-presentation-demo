<!doctype html>
<html>
<head>
<title>Cologne.JS Blender demo</title>
<style type="text/css">
html, body {
	margin: 0;
	width: 100%;
	height: 100%;
}

#canvas {
	width: 100%;
	height: 100%;
}

#fps {
	position: absolute;
	left: 10px;
	top: 10px;
	color: white;
}

#debug {
    position: absolute;
    right: 0px;
}
</style>
<script type="text/javascript" src="babylon.2.1-beta.debug.js"></script>
</head>
<body>
    <button onclick="toggleDebug()" id="debug">Debug</button>
<canvas id="canvas"></canvas>
<script type="text/javascript">
var canvas = document.getElementById("canvas");
var engine = new BABYLON.Engine(canvas, true);
BABYLON.SceneLoader.Load("", "colognejs.babylon", engine, function (scene) {
    // file is loaded
    scene.executeWhenReady(function () {
        // scene (material et al) is ready
        scene.activeCamera.attachControl(canvas);
        // activate collision check on camera
        scene.activeCamera.checkCollisions = true;

        var ground = scene.meshes[3];
        ground.checkCollisions = true;

        var icosphere = scene.meshes[0];
        icosphere.checkCollisions = true;

        scene.enablePhysics(null, new BABYLON.CannonJSPlugin());
        icosphere.setPhysicsState(BABYLON.PhysicsEngine.SphereImpostor, { mass: 2, friction: 0.4, restitution: 0.3 });
        // mop: mass 0 => static object
        ground.setPhysicsState(BABYLON.PhysicsEngine.BoxImpostor, { mass: 0, friction: 0.4, restitution: 2 });
        var fps = document.getElementById("fps");
        // Once the scene is loaded, just register a render loop to render it
        engine.runRenderLoop(function() {
            scene.render();
            fps.innerHTML = engine.getFps().toFixed() + " fps";
        });
    });
});

var debug = false;
var toggleDebug = function() {
    debug = !debug;
    var debugLayer = engine.scenes[0].debugLayer;
    if (debug) {
        debugLayer.show();
    } else {
        debugLayer.hide();
    }
}
</script>
<div id="fps"></div>
</body>
<html>
